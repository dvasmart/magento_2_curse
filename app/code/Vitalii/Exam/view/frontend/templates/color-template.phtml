<?php


use Vitalii\Exam\Api\Data\ColorInterface;
use Vitalii\Exam\Block\Colors;
use Vitalii\Exam\Model\ColorModel;
use Vitalii\Exam\ViewModel\GetConfig;

/** @var ColorInterface[] $colors */
$colors = $block->getColors();

/** @var GetConfig $numberColors */
$numberColors = $block->getData('colors_number');

$colorsValue = $numberColors->getColorsNumber();

$i=1;
?>
<p>To change number of shown colors go to Admin panel->Stores->Settings->Configuration->Colors Value Table->Colors Value
    and set how many colors will be shown on this page</p>
<a href="<?= $block->getUrl('exam_route', ['sort_direction' => $block->getSortDirection()]); ?>">
    <?= __("Sort by color name")?>
</a>
<table>
    <tr>
        <th class="entity-id">Entity Id</th>
        <th class="color-name">Color Name</th>
        <th class="description">Description</th>
        <th class="created-at">Created At</th>
        <th class="link">Link</th>
    </tr>
    <?php if (!empty($colors)): ?>
        <?php foreach ($colors as $color): ?>
            <?php if ($i <= $colorsValue): ?>
                <tr>
                        <td><?php echo $color->getId() ?></td>
                        <td><?php echo $color->getColorName() ?></td>
                        <td><?php echo $color->getDescription() ?></td>
                        <td><?php echo $color->getCreatedAt() ?></td>
                        <td>
                            <a  href="<?= $block->getFruitsUrl($color->getColorName()); ?>">
                                <?= __('See Fruits with %1 color', $color->getColorName()); ?>
                            </a>
                        </td>
                      </tr>
            <?php $i++; ?>
            <?php endif; ?>
        <?php endforeach; ?>
    <?php else: ?>
        <div class="message">
            <h1 class="message-error error message">
                <?= __("There are no colors shown on this page.") ?>
            </h1>
        </div>
    <?php endif; ?>
</table>
